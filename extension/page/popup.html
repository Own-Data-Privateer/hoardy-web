<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>pWebArc: Settings</title>
    <link rel="shortcut icon" type="image/svg" href="../icon/main.svg">
    <link rel="stylesheet" href="main.css?v=1">
    <style>
body {
    min-width: 300px;
    line-height: 160%;
}

input[type="button"], .help-btn {
    vertical-align: top;
}

.help-tip {
    left: 10%;
    right: 10%;
}

h1 {
    font-size: 110%;
    margin: 0;
    margin-top: 5px;
    display: flex;
}

h2 {
    font-size: 100%;
    margin: 0;
    margin-top: 2px;
    display: flex;
}

h1 span.right,
h2 span.right {
    display: flex;
}

#version {
    margin-left: 0.5em;
    font-size: 70%;
    vertical-align: top;
}

#help, #forgetHistory, #showState {
    margin-left: 0.5em;
}

.smaller,
.pure-text input[type="button"] {
    font-size: 80%;
}

.stats .help-root > div {
    display: flex;
}

.stats .help-root > div > span:nth-child(1) {
    margin-left: 1em;
}

.stats .help-root > div > span:nth-child(2) {
    padding-left: 1em;
    margin: 0 1em 0 auto;
}

.stats .help-root > div > span:nth-child(3) {
    min-width: 5em;
    text-align: right;
}

.stats .help-root > div > span:nth-child(3) > span.target {
    padding: 0 1em;
}

label code {
    margin: 0 0.5em;
}

#showAll {
    font-size: 100%;
    width: 99%;
    text-align: center;
    margin: 5px;
}

.disabled-archiving .da,
.disabled-collecting .dc,
.disabled-collecting .dc input[type="checkbox"].toggle,
.disabled-auto .dauto,
.disabled-problematic-notify .dpn,
.disabled-limbo-notify .dln {
    --text-background: var(--text-inactive-background);
    --text-border-color: var(--text-inactive-border-color);
    --text-color: var(--text-inactive-color);
    --toggle-background: var(--text-inactive-background);
    --toggle-border-color: var(--text-inactive-border-color);
}
    </style>
  </head>
  <body>
    <div id="body_loading">
      <p>Loading...</p>
    </div>
    <div id="body_error" style="display: none">
      <p>This page failed to initialize. To see more details:</p>
      <ul>
        <li>On Firefox-based browser: go to <code>about:debugging#/runtime/this-firefox</code>, click &quot;Inspect&quot; button on &quot;pWebArc&quot;, select &quot;Console&quot;</li>
        <li>On Chromium-based browser: go to <code>chrome://extensions/</code>, click &quot;Inspect views&quot; link on &quot;pWebArc&quot;, select &quot;Console&quot;</li>
      </ul>
    </div>
    <div id="body" style="display: none">
    <h1>
      Globally
      <span data-help="Open the changelog page."><input type="button" id="version" value="v?" /></span>
      <span data-help="Open the help page."><input type="button" id="help" class="smaller" value="Help" /></span>
      <span class="right">
        <span data-help="Forget recent history."><input type="button" id="forgetHistory" value="Forget" /></span>
        <span data-help="Show the internal state and history."><input type="button" id="showState" value="State" /></span>
      </span>
    </h1>
    <div class="stats">
      <div id="div-stats.scheduled" data-help="The number of currently scheduled internal actions, including those generated by delayed saving of config and persistent stats, automatic retries of failed archivals, and &quot;Automatic actions for recently closed tabs&quot; below. When this is non-zero, toolbar button's badge has &quot;~&quot; or &quot;.&quot; in it.">
        <span>Scheduled</span>
        <span>
          <span data-help="Run all scheduled actions immediately."><input type="button" id="runAllActions" class="smaller" value="Run" /></span>
          <span data-help="Cancel all scheduled actions that can be canceled."><input type="button" id="cancelCleanupActions" class="smaller" value="Cancel" /></span>
        </span>
        <span>
          <span id="stats.scheduled">0</span>
        </span>
      </div>
      <div id="div-stats.archived" data-help="For this session, the numbers of reqres that were: successfully archived to the server (+still in the archival queue) / failed to be archived to the server.">
        <span>Archived/Failed</span>
        <span>
          <span data-help="Retry archiving reqres that failed to archive. I.e., move all failed to archive reqres to the archival queue. This action will be performed automatically every 60 seconds when archiving is enabled."><input type="button" id="retryAllFailedArchives" value="Retry" /></span>
        </span>
        <span>
          <span id="stats.archive_ok">0</span>
          (+<span id="stats.in_queue">0</span>)
          /
          <span id="stats.archive_failed">0</span>
        </span>
      </div>
      <div id="div-stats.collected" data-help="From the last reset, the numbers of finished reqres that were collected for archival (and the sum total of all sizes of their dumps) / discarded from memory.">
        <span>Collected/Discarded</span>
        <span>
        </span>
        <span>
          <span id="stats.collected">0</span>
          (<span id="stats.collected_size">0</span>)
          /
          <span id="stats.discarded">0</span>
        </span>
      </div>
      <div id="div-stats.in_limbo" data-help="At the moment, the number of finished reqres in limbo (and the sum total of all sizes of their dumps).">
        <span>In limbo</span>
        <span>
          <span data-help="Collect all reqres in limbo."><input type="button" id="collectAllInLimbo" value="Collect" /></span>
          <span data-help="Discard all reqres in limbo."><input type="button" id="discardAllInLimbo" value="Discard" /></span>
        </span>
        <span>
          <span id="stats.in_limbo">0</span>
          (<span id="stats.in_limbo_size">0</span>)
        </span>
      </div>
      <div id="div-stats.picked" data-help="From the last reset, the number of reqres that satisfied &quot;Pick reqres for archival when they finish&quot; / the number of those that did not (at the moment they `finished`).">
        <span>Picked/Dropped</span>
        <span>
        </span>
        <span>
          <span id="stats.picked">0</span>
          /
          <span id="stats.dropped">0</span>
        </span>
      </div>
      <div id="div-stats.problematic" data-help="At the moment, the number of reqres that satisfied &quot;Mark reqres as problematic when they finish&quot; conditions (at the moment they `finished`).">
        <span>Problematic</span>
        <span>
          <span data-help="Unmark all problematic reqres."><input type="button" id="unmarkAllProblematic" value="Unmark" /></span>
        </span>
        <span>
          <span id="stats.problematic">0</span>
        </span>
      </div>
      <div id="div-stats.in_flight" data-help="At the moment, the number of reqres that have not finished yet.">
        <span>In flight</span>
        <span>
          <span data-help="Stop tracking progress of all in-flight reqres and either pick or drop them, depending on their completion and &quot;Pick reqres for archival when they finish&quot; options."><input type="button" id="stopAllInFlight" value="Stop" /></span>
        </span>
        <span>
          <span id="stats.in_flight">0</span>
        </span>
      </div>
    </div>

    <div name="more">
    <ui id="config.collecting" type="boolean" class="prefer-on" data-help="Also known as &quot;Enable this add-on&quot;. Generate a new reqres and start tracking its progress when the browser makes a new HTTP request. Disabling this option will stop pWebArc from recording any new data. Already tracked reqres will still get tracked until they finish.">Track newly generated requests</ui>
    <ui id="config.archiving" type="boolean" class="prefer-on" data-help="Archive collected reqres by submitting their dumps to the server at the following URL. Disabling this will stop pWebArc from trying to archive already collected data. Note that the archival queue is stored in memory, so you probably should not disable this unless you want to atomically change server-side profile settings or your server is temporarily down and you are annoyed by the error notifications.">Archive collected reqres</ui>
    <ui id="config.archiveURLBase" type="string" class="da" data-help="URL of the server we are archiving to.">to URL</ui>
    </div>

    <h1>This tab
      <span class="right">
        <span data-help="For reqres of this tab, forget recent history."><input type="button" id="forgetTabHistory" value="Forget" /></span>
        <span data-help="For reqres of this tab, show the internal state and history."><input type="button" id="showTabState" value="State" /></span>
      </span>
    </h1>
    <div class="stats">
      <div id="div-tabstats.collected" data-help="For this tab, the numbers of finished reqres that were collected for archival (and the sum total of all sizes of their dumps) / discarded from memory.">
        <span>Collected/Discarded</span>
        <span>
        </span>
        <span>
          <span id="tabstats.collected">0</span>
          (<span id="tabstats.collected_size">0</span>)
          /
          <span id="tabstats.discarded">0</span>
        </span>
      </div>
      <div id="div-tabstats.in_limbo" data-help="For this tab, the number of finished reqres in limbo (and the sum total of all sizes of their dumps).">
        <span>In limbo</span>
        <span>
          <span data-help="For reqres of this tab, collect all reqres in limbo."><input type="button" id="collectAllTabInLimbo" value="Collect" /></span>
          <span data-help="For reqres of this tab, discard all reqres in limbo."><input type="button" id="discardAllTabInLimbo" value="Discard" /></span>
        </span>
        <span>
          <span id="tabstats.in_limbo">0</span>
          (<span id="tabstats.in_limbo_size">0</span>)
        </span>
      </div>
      <div id="div-tabstats.picked" data-help="For this tab, the number of reqres that satisfied &quot;Pick reqres for archival when they finish&quot; / the number of those that did not (at the moment they `finished`).">
        <span>Picked/Dropped</span>
        <span>
        </span>
        <span>
          <span id="tabstats.picked">0</span>
          /
          <span id="tabstats.dropped">0</span>
        </span>
      </div>
      <div id="div-tabstats.problematic" data-help="For this tab, the number of reqres that satisfied &quot;Mark reqres as problematic when they finish&quot; conditions (at the moment they `finished`).">
        <span>Problematic</span>
        <span>
          <span data-help="For reqres of this tab, unmark all problematic reqres."><input type="button" id="unmarkAllTabProblematic" value="Unmark" /></span>
        </span>
        <span>
          <span id="tabstats.problematic">0</span>
        </span>
      </div>
      <div id="div-tabstats.in_flight" data-help="For this tab, the number of in-flight reqres that have not finished yet.">
        <span>In flight</span>
        <span>
          <span data-help="For reqres of this tab, stop tracking progress of all in-flight requests and either collect them for archival or fail them, depending on completion and &quot;Pick reqres for archival when they finish&quot; options."><input type="button" id="stopAllTabInFlight" value="Stop" /></span>
        </span>
        <span>
          <span id="tabstats.in_flight">0</span>
        </span>
      </div>
    </div>
    <ui id="tabconfig.collecting" type="boolean" class="prefer-on dc" tabindex=1 data-help="Track new reqres originating from this tab.">Track new reqres</ui>
    <ui id="tabconfig.limbo" type="boolean" tabindex=2 data-help="For this tab, put newly `finished` reqres tab that satisfy &quot;Pick reqres for archival when they finish&quot; settings into limbo until you collect them for archival or discard them manually.">Pick into limbo</ui>

    <div name="more">
    <ui id="tabconfig.negLimbo" type="boolean" class="prefer-off" data-help="For this tab, put newly `finished` reqres that do NOT satisfy &quot;Pick reqres for archival when they finish&quot; settings into limbo instead of discarding them immediately. Useful for debugging.">Drop into limbo</ui>
    <ui id="tabconfig.profile" type="string" class="da" data-help="Use this server-side profile when archiving reqres originating from this tab.">Profile</ui>
    </div>

    <h1>This tab&#039;s new children</h1>
    <ui id="tabconfig.children.collecting" type="boolean" tabindex=3 class="prefer-on dc" data-help="Enable &quot;Track new reqres&quot; option in new tabs spawned from this tab (via middle mouse click, context menu actions).">Enable &quot;Track new reqres&quot;</ui>
    <ui id="tabconfig.children.limbo" type="boolean" tabindex=4 data-help="Enable &quot;Pick into limbo&quot; option in new tabs spawned from this tab (via middle mouse click, context menu actions).">Enable &quot;Pick into limbo&quot;</ui>

    <div name="more">
    <ui id="tabconfig.children.negLimbo" type="boolean" class="prefer-off" data-help="Enable &quot;Drop into limbo&quot; option in new tabs spawned from this tab (via middle mouse click, context menu actions).">Enable &quot;Drop into limbo&quot;</ui>
    <ui id="tabconfig.children.profile" type="string" class="da" data-help="Use this server-side profile when archiving reqres originating from new tabs opened from this tab (middle mouse click, context menu actions).">Profile</ui>
    </div>

    <h1>New root tabs</h1>
    <ui id="config.root.collecting" type="boolean" class="prefer-on dc" tabindex=5 data-help="Enable &quot;Track new reqres&quot; option in new tabs opened via browser&#039;s &quot;New Tab&quot; browser action (new tabs created via the plus sign in the tab bar, Control+T, &quot;New Tab&quot; menu item). This setting also gets applied to all open tabs when pWebArc is (re)loaded.">Enable &quot;Track new reqres&quot;</ui>
    <ui id="config.root.limbo" type="boolean" tabindex=6 data-help="Enable &quot;Pick into limbo&quot; option in new tabs opened via browser&#039;s &quot;New Tab&quot; action (new tabs created via the plus sign in the tab bar, Control+T, &quot;New Tab&quot; menu item). This setting also gets applied to all open tabs when pWebArc is (re)loaded.">Enable &quot;Pick into limbo&quot;</ui>

    <div name="more">
    <ui id="config.root.negLimbo" type="boolean" class="prefer-off" data-help="Enable &quot;Drop into limbo&quot; option in new tabs opened via browser&#039;s &quot;New Tab&quot; action (new tabs created via the plus sign in the tab bar, Control+T, &quot;New Tab&quot; menu item). This setting also gets applied to all open tabs when pWebArc is (re)loaded.">Enable &quot;Drop into limbo&quot;</ui>
    <ui id="config.root.profile" type="string" class="da" data-help="Use this server-side profile when archiving reqres originating from new tabs opened via browser&#039;s &quot;New Tab&quot; browser action (new tabs created via the plus sign in the tab bar, Control+T, &quot;New Tab&quot; menu item). This setting also gets applied to all open tabs when pWebArc is (re)loaded.">Profile</ui>
    <h1>Background tasks</h1>
    <ui id="config.background.collecting" type="boolean" class="prefer-on dc" data-help="Track new reqres originating from browser&#039;s background tasks (excluding those originating from extensions). With the default browser config you probably should not disable this as browsers do link pre-fetching in background, and disabling this will miss that data.">Track new reqres</ui>
    <ui id="config.background.limbo" type="boolean" data-help="For reqres originating from browser&#039;s background tasks (excluding those originating from extensions), put newly `finished` reqres tab that satisfy &quot;Pick reqres for archival when they finish&quot; settings into limbo until you collect them for archival or discard them manually.">Pick into limbo</ui>
    <ui id="config.background.negLimbo" type="boolean" class="prefer-off" data-help="For reqres originating from browser&#039;s background tasks (excluding those originating from extensions), put newly `finished` reqres tab that do NOT satisfy &quot;Pick reqres for archival when they finish&quot; settings into limbo instead of discarding them immediately. Useful for debugging.">Drop into limbo</ui>
    <ui id="config.background.profile" type="string" class="da" data-help="Use this server-side profile when archiving reqres originating from browser&#039;s background tasks (excluding those originating from extensions).">Profile</ui>
    <h1>Extensions</h1>
    <ui id="config.extension.collecting" type="boolean" class="dc" data-help="Track new reqres originating from browser extensions.">Track new reqres</ui>
    <ui id="config.extension.limbo" type="boolean" data-help="For reqres originating from browser&#039;s extensions/add-ons, put newly `finished` reqres tab that satisfy &quot;Pick reqres for archival when they finish&quot; settings into limbo until you collect them for archival or discard them manually.">Pick into limbo</ui>
    <ui id="config.extension.negLimbo" type="boolean" class="prefer-off" data-help="For reqres originating from browser&#039;s extensions/add-ons, put newly `finished` reqres tab that do NOT satisfy &quot;Pick reqres for archival when they finish&quot; settings into limbo instead of discarding them immediately. Useful for debugging.">Drop into limbo</ui>
    <ui id="config.extension.profile" type="string" class="da" data-help="Use this server-side profile when archiving reqres originating from browser extensions.">Profile</ui>
    <h1>Options</h1>
    <div id="pick-options">
      <h2>Pick reqres for archival when they finish</h2>
      <ui id="config.archivePartialRequest" type="boolean" class="prefer-on" data-help="Pick a finished reqres for archival even when its request body is incomplete. Enabled by default, and you probably want to keep this enabled. See the &quot;Quirks and Bugs&quot; section of the Help page for details.">... with partial POST form data</ui>
      <ui id="config.archiveCanceled" type="boolean" class="prefer-off" data-help="Pick a finished reqres for archival even when it was canceled before it was even sent (this usually means the HTTP request in question was blocked by another extension like &quot;uBlock Origin&quot;). Disabled by default because such archived reqres carry no information except that the browser tried to do a request at specified time.">... in <code>canceled</code> state</ui>
      <ui id="config.archiveNoResponse" type="boolean" class="prefer-off" data-help="Pick a finished reqres for archival even when it got no response (i.e. the request in question was interrupted before request headers were received, this usually means a networking issue). Disabled by default because such archived reqres carry no information except that the browser tried to do a request at specified time.">... in <code>no_response</code> state</ui>
      <ui id="config.archiveIncompleteResponse" type="boolean" class="prefer-off" data-help="Pick a finished reqres for archival even when its response body is incomplete (e.g. response body was interrupted in the middle by a networking issue). Disabled by default because simply reloading the page and not dealing with partial files is usually a better option.">... in <code>incomplete</code> or <code>incomplete_fc</code> state</ui>
      <ui id="config.archiveWithErrors" type="boolean" class="prefer-on" data-help="Pick a finished reqres for archival even when the browser reported it had errors. Enabled by default because not all errors mean the data is invalid, e.g. parsing and rendering-related errors reported by the browser can usually be ignored.">... with errors</ui>
    </div>
    <div id="problematic-options">
      <h2>Mark reqres as problematic when they finish</h2>
      <ui id="config.markProblematicPartialRequest" type="boolean" data-help="Marke a newly finished reqres as problematic when its request body is incomplete. Enabled by default. See the &quot;Quirks and Bugs&quot; section of the Help page for details.">... with partial POST form data</ui>
      <ui id="config.markProblematicCanceled" type="boolean" class="prefer-off" data-help="Mark a newly finished reqres as problematic when it was canceled before it was even sent (this usually means the HTTP request in question was blocked by another extension like &quot;uBlock Origin&quot;). Disabled by default.">... in <code>canceled</code> state</ui>
      <ui id="config.markProblematicNoResponse" type="boolean" class="prefer-on" data-help="Mark a newly finished reqres as problematic when it got no response (i.e. the request in question was interrupted before request headers were received; this usually means a networking issue). Enabled by default.">... in <code>no_response</code> state</ui>
      <ui id="config.markProblematicIncomplete" type="boolean" class="prefer-on" data-help="Mark a newly finished reqres as problematic when its response body is incomplete (e.g. response body was interrupted in the middle by a networking issue). Enabled by default.">... in <code>incomplete</code> state</ui>
      <ui id="config.markProblematicIncompleteFC" type="boolean" class="prefer-off" data-help="Mark a newly finished reqres as problematic when it was loaded from browser's cache but its response data was not given to the extension (this only happens on Firefox-based browsers). Disabled by default because this usually means that one of the previously collected reqres had this response data archived already, if had not, you can reload the page with browser's cache disabled via `Contrlol+F5`.">... in <code>incomplete_fc</code> state</ui>
      <ui id="config.markProblematicWithErrors" type="boolean" data-help="Mark a newly finished reqres as problematic when the browser reported it had some potentially problematic errors. Disabled by default because with this enabled all reqres blocked by ad-blocking extension like &quot;uBlock Origin&quot; will be marked as problematic.">... with errors</ui>
      <ui id="config.markProblematicPickedWithErrors" type="boolean" class="prefer-on" data-help="Mark a newly finished reqres as problematic when the browser reported it had some potentially problematic errors and &quot;Pick reqres for archival when they finish&quot; settings mark it to be picked for archival. Enabled by default.">... with errors and get <code>picked</code></ui>
    </div>
    <div id="closed-auto-options">
      <h2>Automatic actions for recently closed tabs</h2>
      <ui id="config.autoTimeout" type="number" class="dauto" data-help="Perform automatic actions after this many seconds after the target tab is closed.">Timeout</ui>
      <ui id="config.autoUnmarkProblematic" type="boolean" data-help="For a recently closed tab, automatically forget about problematic reqres.">Auto-unmark problematic reqres</ui>
      <ui id="config.autoPopInLimboCollect" type="boolean" data-help="For a recently closed tab, automatically collect reqres in limbo.">Auto-collect reqres in limbo</ui>
      <ui id="config.autoPopInLimboDiscard" type="boolean" class="prefer-off" data-help="For a recently closed tab, automatically discard reqres in limbo.">Auto-discard reqres in limbo</ui>
    </div>
    <div id="history-options">
      <h2>History</h2>
      <ui id="config.logDiscarded" type="boolean" class="prefer-on" data-help="What it says on the tin. Enabled by default because it makes figuring out what the browser is doing much easier. Disabling this could make the log much shorter at the cost of making things harder to debug.">Log non-problematic discarded reqres</ui>
      <ui id="config.history" type="number" data-help="Remember at most this many collected and discarded reqres in the log.">Maximum size</ui>
    </div>
    <div id="notification-options">
      <h2>Generate desktop notifications about</h2>
      <ui id="config.problematicNotify" type="boolean" data-help="Complain when a new problematic reqres appears.">... new problematic reqres</ui>
      <ui id="config.problematicNotifyNumber" type="number" class="dpn" data-help="Show no more than this many latest METHOD + URL lines in the generated problematic reqres notification.">But no more than</ui>
      <ui id="config.limboNotify" type="boolean" class="prefer-on" data-help="Complain when too much stuff is being held in limbo.">... too much stuff in limbo</ui>
      <ui id="config.limboMaxNumber" type="number" class="dln" data-help="Start complaining when more than this number of reqres are in limbo.">Complain after #</ui>
      <ui id="config.limboMaxSize" type="number" class="dln" data-help="Start complaining when the total size of all dumps in limbo is larger than this many Megabytes.">Complain after MiB</ui>
      <ui id="config.autoNotify" type="boolean" data-help="Generate a notification when an automatic action was performed in background.">... automatic actions</ui>
      <ui id="config.archiveNotifyFailed" type="boolean" class="prefer-on" data-help="Complain when some reqres fail to be archived to the archival server.">... archival errors</ui>
      <ui id="config.archiveNotifyOK" type="boolean" data-help="Generate an &quot;All OK&quot; notification when the queue becomes empty the very first time or after a previous archival failure. This exists mostly for on-boarding new users.">... first empty archival queue</ui>
    </div>
    <div id="ui-options">
      <h2>User Interface and Accessibility</h2>
      <ui id="config.colorblind" type="boolean" data-help="Use bluish colors instead of greenish where possible.">Colorblind mode</ui>
      <ui id="config.pureText" type="boolean" data-help="Do not use emojis in UI labels. Makes screen readers happier.">Pure text labels</ui>
    </div>
    <div id="debugging-options">
      <h2>Debugging
        <span class="right">
          <span data-help="Reset all persistent collected, discarded, picked, and dropped stats to zero."><input type="button" id="resetPersistentStats" class="smaller" value="Wipe stats!" /></span>
        </span>
      </h2>
      <ui id="config.ephemeral" type="boolean" class="prefer-off" data-help="Make all changes to settings in this popup ephemeral from this point on. Restarting the browser or reloading the extension will reset config to the last state when this setting was off.">Ephemeral settings</ui>
      <ui id="config.debugging" type="boolean" class="prefer-off" data-help="Report lots of data into extension&#039;s debugging log (in Firefox: about:debugging; in Chromium: extension inspector). This will make things very slow and will eat lots of memory. Do not enable unless you know what you are doing.">Verbose debugging log (SLOW!)</ui>
      <ui id="config.dumping" type="boolean" class="prefer-off" data-help="Dump raw CBOR reqres dumps into extension&#039;s debugging log. Does nothing when the previous option is not enabled. Makes things even slower and eats even more memory. Do not enable unless you know what you are doing.">Dump raw CBORs into the log</ui>
      <ui id="config.doNotQueue" type="boolean" class="prefer-off" data-help="Do not queue any new reqres for archival. Enabling this will make pWebArc update the stats and the log as if everything was properly queued for archival, but then discard all the new data instead. Reqres already queued for archival will still be pushed to the archiving server, eventually. Do not enable unless you know what you are doing. Useful for debugging the collection machinery of pWebArc without actually collecting anything.">Do not queue new reqres</ui>
    </div>
    </div>

    <input type="button" id="showAll" tabindex=7 value="Show all" />
    </div>

    <script src="../lib/compat.js"></script>
    <script src="../lib/utils.js"></script>
    <script src="../lib/lutils.js"></script>
    <script src="popup.js"></script>
  </body>
</html>
